

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9. Unit metaclasses and decorators &mdash; BioSTEAM 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="10. Advanced simulation" href="Advanced simulation.html" />
    <link rel="prev" title="8. Inheriting from Unit" href="Inheriting from Unit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BioSTEAM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Getting started.html">1. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="MixedStream objects and thermodynamic equilibrium.html">2. MixedStream objects and thermodynamic equilibrium</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating a Unit.html">3. Creating a Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Unit operation examples.html">4. Unit operation examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="Find unit operations and manage flowsheets.html">5. Find unit operations and manage flowsheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Using -pipe- notation.html">6. Using -pipe- notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Techno-economic analysis of a biorefinery.html">7. Techno-economic analysis of a biorefinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inheriting from Unit.html">8. Inheriting from Unit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Unit metaclasses and decorators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mixer-metaclass">9.1. mixer metaclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splitter-metaclass">9.2. splitter metaclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="#static-metaclass">9.3. static metaclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cost-decorator">9.4. cost decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#References">9.5. References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Advanced simulation.html">10. Advanced simulation</a></li>
</ul>
<p class="caption"><span class="caption-text">BioSTEAM API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Species.html">Species</a></li>
<li class="toctree-l1"><a class="reference internal" href="Stream.html">Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="MixedStream.html">MixedStream</a></li>
<li class="toctree-l1"><a class="reference internal" href="Unit.html">Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="PowerUtility.html">PowerUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="HeatUtility.html">HeatUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="System.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="TEA.html">TEA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Flowsheet.html">find</a></li>
<li class="toctree-l1"><a class="reference internal" href="compounds.html">compounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">units</a></li>
<li class="toctree-l1"><a class="reference internal" href="inspect.html">inspect</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">evaluation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BioSTEAM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>9. Unit metaclasses and decorators</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Unit metaclasses and decorators.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Unit-metaclasses-and-decorators">
<h1>9. Unit metaclasses and decorators<a class="headerlink" href="#Unit-metaclasses-and-decorators" title="Permalink to this headline">¶</a></h1>
<p>Unit metaclasses and decorators extend the behavior of Unit subclasses.</p>
<div class="section" id="mixer-metaclass">
<h2>9.1. mixer metaclass<a class="headerlink" href="#mixer-metaclass" title="Permalink to this headline">¶</a></h2>
<p>Unit subclasses that implement the mixer metaclass behave like mixers
regarding mass and energy balances:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">biosteam</span> <span class="k">as</span> <span class="nn">bst</span>
<span class="kn">import</span> <span class="nn">biosteam.units.metaclasses</span> <span class="k">as</span> <span class="nn">meta</span>

<span class="c1"># Set up Stream.species</span>
<span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Species</span><span class="p">(</span><span class="s1">&#39;Water&#39;</span><span class="p">,</span> <span class="s1">&#39;Ethanol&#39;</span><span class="p">)</span>

<span class="c1"># Make Unit subclass</span>
<span class="k">class</span> <span class="nc">MixerUnit</span><span class="p">(</span><span class="n">bst</span><span class="o">.</span><span class="n">Unit</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">meta</span><span class="o">.</span><span class="n">mixer</span><span class="p">):</span> <span class="k">pass</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">Water</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">Ethanol</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">320</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">Water</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">Ethanol</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">unit</span> <span class="o">=</span> <span class="n">MixerUnit</span><span class="p">(</span><span class="n">ins</span><span class="o">=</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">))</span>
<span class="n">unit</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">unit</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MixerUnit: U1
ins...
[0] d1
    phase: &#39;l&#39;, T: 320 K, P: 101325 Pa
    flow (kmol/hr): Water    200
                    Ethanol  100
[1] d2
    phase: &#39;l&#39;, T: 300 K, P: 101325 Pa
    flow (kmol/hr): Water    100
                    Ethanol  100
outs...
[0] d3
    phase: &#39;l&#39;, T: 311.8 K, P: 101325 Pa
    flow (kmol/hr): Water    300
                    Ethanol  200
</pre></div></div>
</div>
</div>
<div class="section" id="splitter-metaclass">
<h2>9.2. splitter metaclass<a class="headerlink" href="#splitter-metaclass" title="Permalink to this headline">¶</a></h2>
<p>Unit subclasses that implement the splitter metaclass behave like
splitters regarding mass and energy balances.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">SplitterUnit</span><span class="p">(</span><span class="n">bst</span><span class="o">.</span><span class="n">Unit</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">meta</span><span class="o">.</span><span class="n">splitter</span><span class="p">):</span> <span class="k">pass</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">Water</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">Ethanol</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">320</span><span class="p">)</span>
<span class="n">unit</span> <span class="o">=</span> <span class="n">SplitterUnit</span><span class="p">(</span><span class="n">ins</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Water&#39;</span><span class="p">,</span> <span class="s1">&#39;Ethanol&#39;</span><span class="p">))</span>
<span class="n">unit</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">unit</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SplitterUnit: U2
ins...
[0] d4
    phase: &#39;l&#39;, T: 320 K, P: 101325 Pa
    flow (kmol/hr): Water    200
                    Ethanol  100
outs...
[0] d5
    phase: &#39;l&#39;, T: 320 K, P: 101325 Pa
    flow (kmol/hr): Water    100
                    Ethanol  20
[1] d6
    phase: &#39;l&#39;, T: 320 K, P: 101325 Pa
    flow (kmol/hr): Water    100
                    Ethanol  80
</pre></div></div>
</div>
</div>
<div class="section" id="static-metaclass">
<h2>9.3. static metaclass<a class="headerlink" href="#static-metaclass" title="Permalink to this headline">¶</a></h2>
<p>Unit subclasses that implement the static metaclass expect only one
input stream (the feed) and only one output stream (the product). The
static metaclass makes the feed and product share material flow rate
data. Also, the product’s <code class="docutils literal notranslate"><span class="pre">T</span></code>, <code class="docutils literal notranslate"><span class="pre">P</span></code>, and <code class="docutils literal notranslate"><span class="pre">phase</span></code> will be equal to
the feed’s upon simulation if no <code class="docutils literal notranslate"><span class="pre">_run</span></code> method is implemented:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">StaticUnit</span><span class="p">(</span><span class="n">bst</span><span class="o">.</span><span class="n">Unit</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">meta</span><span class="o">.</span><span class="n">static</span><span class="p">):</span> <span class="k">pass</span>
<span class="n">feed</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">Water</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">unit</span> <span class="o">=</span> <span class="n">StaticUnit</span><span class="p">(</span><span class="n">ins</span><span class="o">=</span><span class="n">feed</span><span class="p">)</span>
<span class="n">unit</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">unit</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
StaticUnit: U3
ins...
[0] d7
    phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa
    flow (kmol/hr): Water  1e+03
outs...
[0] d8
    phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa
    flow (kmol/hr): Water  1e+03
</pre></div></div>
</div>
<p>Because material data is shared, the following is True:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">product</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">outs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">(</span><span class="n">feed</span><span class="o">.</span><span class="n">mol</span> <span class="ow">is</span> <span class="n">product</span><span class="o">.</span><span class="n">mol</span> <span class="ow">and</span>
 <span class="n">feed</span><span class="o">.</span><span class="n">mass</span> <span class="ow">is</span> <span class="n">product</span><span class="o">.</span><span class="n">mass</span> <span class="ow">and</span>
 <span class="n">feed</span><span class="o">.</span><span class="n">vol</span> <span class="ow">is</span> <span class="n">product</span><span class="o">.</span><span class="n">vol</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[4]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>True
</pre></div>
</div>
</div>
</div>
<div class="section" id="cost-decorator">
<h2>9.4. cost decorator<a class="headerlink" href="#cost-decorator" title="Permalink to this headline">¶</a></h2>
<p>The cost decorator adds a free on board purchase cost based on the
exponential scale up equation:</p>
<div class="math">
<p><img src="_images/math/37593ef29cfdad3f78ea7a4d741881373bee83b5.png" alt="New\ cost = N \cdot cost \bigg(\frac{CE_{new}}{CE}\bigg) \bigg(\frac{S_{new}}{N \cdot S}\bigg)^{n}"/></p>
</div><div class="math">
<p><img src="_images/math/fed0c9fdec841473e70d225782e362198bdbc318.png" alt="Electricity\ rate = kW \bigg(\frac{S_{new}}{S}\bigg)"/></p>
</div><div class="math">
<p><img src="_images/math/87f9ad8f55fa88664ebff2615a3667e16e202301.png" alt="N = ceil \bigg( \frac{S_{new}}{ub} \bigg)"/></p>
</div><p><img class="math" src="_images/math/082274b2697a2754b3ec4da15ed10d3fa0e960aa.png" alt="N\text{: Number of units}"/></p>
<p><img class="math" src="_images/math/9961ef53f8ba5ee74fec444ec81b4ec0e7ad200c.png" alt="ub\text{: Upper bound of size}"/></p>
<p><img class="math" src="_images/math/8897d4143dcce971b7b02799e1b8870486130424.png" alt="CE\text{: New Chemical Engineering Plant Cost Index}"/></p>
<p><img class="math" src="_images/math/4d5084ccb1e23d6a3a64053d4876f9980f3f1ce3.png" alt="CE\text{: Chemical Engineering Plant Cost Index}"/></p>
<p><img class="math" src="_images/math/275d53766d45e119bda1162a48ca3f3e1b927d44.png" alt="S_{new}\text{: New size value}"/></p>
<p><img class="math" src="_images/math/874d8aec3d35989300f29c22de9630e8467c5a6a.png" alt="S\text{: Original size value}"/></p>
<p><img class="math" src="_images/math/2bb9eb43d482adc9f4d51e10e91baf8452c43af8.png" alt="cost\text{: Free on board purchase cost at size S}"/></p>
<p><img class="math" src="_images/math/5b3e92bd8df00fb786b48519e865aa2bbe0b6e5e.png" alt="kW\text{: Electricity rate in (kW) at size S}"/></p>
<p><img class="math" src="_images/math/f4a9d8224f9c97467705c4254c7d223f401c6917.png" alt="n\text{: Exponential factor}"/></p>
<p>Create a Shredder Unit subclass for sugar cane with the following
exponential scale up factors <a class="reference external" href="#References">[1]</a>:</p>
<ul class="simple">
<li>Chemical Engineering Plant Cost Index: 567.3</li>
<li>Size: 500,000 kg/hr flow rate</li>
<li>Purchase cost: 2,500,000</li>
<li>Electricity rate: 3,000 kW</li>
<li>Exponential factor: 0.6</li>
</ul>
<p>Additionally, include a bare module factor of 1.39 as an approximation
for this example <a class="reference external" href="#References">[2]</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">biosteam.units.decorators</span> <span class="k">import</span> <span class="n">cost</span>
<span class="n">bst</span><span class="o">.</span><span class="n">CE</span> <span class="o">=</span> <span class="mf">603.1</span> <span class="c1"># For year 2018</span>

<span class="c1"># basis will be the total flow rate in kg/hr</span>
<span class="nd">@cost</span><span class="p">(</span><span class="s1">&#39;Flow rate&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="mf">2.5e6</span><span class="p">,</span>
      <span class="n">CE</span><span class="o">=</span><span class="mf">567.3</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">S</span><span class="o">=</span><span class="mf">500e3</span><span class="p">,</span> <span class="n">kW</span><span class="o">=</span><span class="mi">3000</span><span class="p">,</span> <span class="n">BM</span><span class="o">=</span><span class="mf">1.39</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Shredder</span><span class="p">(</span><span class="n">bst</span><span class="o">.</span><span class="n">Unit</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">meta</span><span class="o">.</span><span class="n">static</span><span class="p">):</span> <span class="k">pass</span>

<span class="c1">### Test a Shreadder object ###</span>

<span class="c1"># Set up Stream.species</span>
<span class="n">species</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Species</span><span class="p">()</span>
<span class="n">species</span><span class="o">.</span><span class="n">SugarCane</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">compounds</span><span class="o">.</span><span class="n">Substance</span><span class="p">(</span><span class="s1">&#39;SugarCane&#39;</span><span class="p">)</span>
<span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>

<span class="c1"># Display flow rate in kg/hr</span>
<span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">display_units</span><span class="o">.</span><span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;kg/hr&#39;</span>

<span class="n">feed</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">SugarCane</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">)</span>
<span class="n">shredder</span> <span class="o">=</span> <span class="n">Shredder</span><span class="p">(</span><span class="n">ins</span><span class="o">=</span><span class="n">feed</span><span class="p">)</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>

<span class="n">shredder</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">results</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Shredder: U4
ins...
[0] d9
    phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa
    flow (kg/hr): SugarCane  1e+06
outs...
[0] d10
    phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa
    flow (kg/hr): SugarCane  1e+06
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Shredder</th>
      <th>Units</th>
      <th>U4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Power</th>
      <th>Rate</th>
      <td>kW</td>
      <td>6e+03</td>
    </tr>
    <tr>
      <th>Cost</th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
    <tr>
      <th>Design</th>
      <th>Flow rate</th>
      <td>kg/hr</td>
      <td>1e+06</td>
    </tr>
    <tr>
      <th>Cost</th>
      <th>Shredder</th>
      <td>USD</td>
      <td>4.03e+06</td>
    </tr>
    <tr>
      <th>Purchase cost</th>
      <th></th>
      <td>USD</td>
      <td>4.03e+06</td>
    </tr>
    <tr>
      <th>Utility cost</th>
      <th></th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Cost data is stored as CostItem objects in the “cost_items” dictionary:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Shredder</span><span class="o">.</span><span class="n">cost_items</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;Shredder&#39;: &lt;CostItem: Flow rate (kg/hr)&gt;}
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Shredder</span><span class="o">.</span><span class="n">cost_items</span><span class="p">[</span><span class="s1">&#39;Shredder&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CostItem: Flow rate (kg/hr)
 S     5e+05
 ub    0
 CE    567
 cost  2.5e+06
 n     0.6
 kW    3e+03
 BM    1
</pre></div></div>
</div>
<p>Any option can be changed:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Shredder</span><span class="o">.</span><span class="n">cost_items</span><span class="p">[</span><span class="s1">&#39;Shredder&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span> <span class="o">=</span> <span class="mf">3e6</span> <span class="c1"># Change base cost</span>
<span class="c1"># This also works:</span>
<span class="c1"># Shredder.cost_items[&#39;Shredder&#39;][&#39;cost&#39;] = 3e6</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">results</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Shredder</th>
      <th>Units</th>
      <th>U4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Power</th>
      <th>Rate</th>
      <td>kW</td>
      <td>6e+03</td>
    </tr>
    <tr>
      <th>Cost</th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
    <tr>
      <th>Design</th>
      <th>Flow rate</th>
      <td>kg/hr</td>
      <td>1e+06</td>
    </tr>
    <tr>
      <th>Cost</th>
      <th>Shredder</th>
      <td>USD</td>
      <td>4.83e+06</td>
    </tr>
    <tr>
      <th>Purchase cost</th>
      <th></th>
      <td>USD</td>
      <td>4.83e+06</td>
    </tr>
    <tr>
      <th>Utility cost</th>
      <th></th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Shredder</span><span class="o">.</span><span class="n">cost_items</span><span class="p">[</span><span class="s1">&#39;Shredder&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="mf">6e5</span> <span class="c1"># Change size upper bound</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">shredder</span><span class="o">.</span><span class="n">results</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Shredder</th>
      <th>Units</th>
      <th>U4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Power</th>
      <th>Rate</th>
      <td>kW</td>
      <td>6e+03</td>
    </tr>
    <tr>
      <th>Cost</th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Design</th>
      <th>Flow rate</th>
      <td>kg/hr</td>
      <td>1e+06</td>
    </tr>
    <tr>
      <th>#Shredder</th>
      <td></td>
      <td>2</td>
    </tr>
    <tr>
      <th>Cost</th>
      <th>Shredder</th>
      <td>USD</td>
      <td>6.38e+06</td>
    </tr>
    <tr>
      <th>Purchase cost</th>
      <th></th>
      <td>USD</td>
      <td>6.38e+06</td>
    </tr>
    <tr>
      <th>Utility cost</th>
      <th></th>
      <td>USD/hr</td>
      <td>469</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Note: It is also possible to decorate a Unit subclass multiple times to
add multiple cost items.</p>
</div>
<div class="section" id="References">
<h2>9.5. References<a class="headerlink" href="#References" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Huang, H., Long, S., &amp; Singh, V. (2016) “Techno-economic analysis of
biodiesel and ethanol co-production from lipid-producing sugarcane”
Biofuels, Bioproducts and Biorefining, 10(3), 299–315.
<a class="reference external" href="https://doi.org/10.1002/bbb.1640">https://doi.org/10.1002/bbb.1640</a></li>
<li>Seider, W. D., Lewin, D. R., Seader, J. D., Widagdo, S., Gani, R., &amp;
Ng, M. K. (2017). Product and Process Design Principles. Wiley. Cost
Accounting and Capital Cost Estimation (Chapter 16)</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Advanced simulation.html" class="btn btn-neutral float-right" title="10. Advanced simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Inheriting from Unit.html" class="btn btn-neutral float-left" title="8. Inheriting from Unit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Yoel Cortes-Pena and Jeremy Guest

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>