

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>biosteam.units._splitter &mdash; BioSTEAM 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> BioSTEAM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Getting started.html">3. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Creating a Unit.html">4. Creating a Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Managing flowsheets.html">5. Managing flowsheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Using -pipe- notation.html">6. Using -pipe- notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Unit operation results.html">7. Unit operation results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Process specifications.html">8. Process specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Importing biorefineries.html">9. Importing bioferineries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Techno-economic analysis.html">10. Techno-economic analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Building a biorefinery.html">11. Building a biorefinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Inheriting from Unit.html">12. Inheriting from Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Unit decorators.html">13. Unit decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Monte Carlo.html">14. Monte Carlo</a></li>
</ul>
<p class="caption"><span class="caption-text">BioSTEAM API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Unit.html">Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PowerUtility.html">PowerUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../UtilityAgent.html">UtilityAgent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../HeatUtility.html">HeatUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../System.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TEA.html">TEA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CombinedTEA.html">CombinedTEA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Flowsheet.html">Flowsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../units/units.html">units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../evaluation/evaluation.html">evaluation</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer's guide/Contributing to BioSTEAM.html">Contributing to BioSTEAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer's guide/Code of conduct.html">Code of conduct</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">BioSTEAM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>biosteam.units._splitter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for biosteam.units._splitter</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Mon May 20 22:04:02 2019</span>

<span class="sd">@author: yoelr</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">Unit</span>
<span class="kn">from</span> <span class="nn">.._graphics</span> <span class="kn">import</span> <span class="n">splitter_graphics</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">from</span> <span class="nn">thermosteam.indexer</span> <span class="kn">import</span> <span class="n">ChemicalIndexer</span>
<span class="kn">from</span> <span class="nn">._process_specification</span> <span class="kn">import</span> <span class="n">ProcessSpecification</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;run_split&#39;</span><span class="p">,</span> <span class="s1">&#39;run_split_with_mixing&#39;</span><span class="p">,</span> <span class="s1">&#39;Splitter&#39;</span><span class="p">,</span> <span class="s1">&#39;FakeSplitter&#39;</span><span class="p">,</span>
           <span class="s1">&#39;ReversedSplitter&#39;</span><span class="p">,</span> <span class="s1">&#39;ReversedSplit&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">run_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Splitter mass and energy balance function based on one input stream.&quot;&quot;&quot;</span>
    <span class="n">top</span><span class="p">,</span> <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outs</span>
    <span class="n">feed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">top_mol</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">mol</span>
    <span class="n">feed_mol</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">mol</span>
    <span class="n">top_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">feed_mol</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">split</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">feed_mol</span> <span class="o">-</span> <span class="n">top_mol</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">T</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">P</span>

<span class="k">def</span> <span class="nf">run_split_with_mixing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Splitter mass and energy balance function with mixing all input streams.&quot;&quot;&quot;</span>
    <span class="n">top</span><span class="p">,</span> <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outs</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
    <span class="n">top</span><span class="o">.</span><span class="n">mix_from</span><span class="p">(</span><span class="n">ins</span><span class="p">)</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">copy_like</span><span class="p">(</span><span class="n">top</span><span class="p">)</span>
    <span class="n">top_mol</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">mol</span>
    <span class="n">top_mol</span><span class="p">[:]</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">mol</span><span class="p">[:]</span> <span class="o">-=</span> <span class="n">top_mol</span>


<div class="viewcode-block" id="Splitter"><a class="viewcode-back" href="../../../units/Splitter.html#biosteam.units.Splitter">[docs]</a><span class="k">class</span> <span class="nc">Splitter</span><span class="p">(</span><span class="n">Unit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a splitter that separates mixed streams based on splits.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ins : stream</span>
<span class="sd">        Inlet fluid to be split.</span>
<span class="sd">    outs : stream sequence</span>
<span class="sd">        * [0] Split stream</span>
<span class="sd">        * [1] Remainder stream    </span>
<span class="sd">    split : Should be one of the following</span>
<span class="sd">            * [float] The fraction of net feed in the 0th outlet stream</span>
<span class="sd">            * [array_like] Componentwise split of feed to 0th outlet stream</span>
<span class="sd">            * [dict] ID-split pairs of feed to 0th outlet stream</span>
<span class="sd">    order=None : Iterable[str], defaults to biosteam.settings.chemicals.IDs</span>
<span class="sd">        Chemical order of split.</span>
<span class="sd">    </span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Create a Splitter object with an ID, a feed stream, two outlet streams,</span>
<span class="sd">    and an overall split:</span>
<span class="sd">        </span>
<span class="sd">    .. code-block:: python</span>
<span class="sd">    </span>
<span class="sd">       &gt;&gt;&gt; from biosteam import units, settings, Stream</span>
<span class="sd">       &gt;&gt;&gt; settings.set_thermo([&#39;Water&#39;, &#39;Ethanol&#39;])</span>
<span class="sd">       &gt;&gt;&gt; feed = Stream(&#39;feed&#39;, Water=20, Ethanol=10, T=340)</span>
<span class="sd">       &gt;&gt;&gt; S1 = units.Splitter(&#39;S1&#39;, ins=feed, outs=(&#39;top&#39;, &#39;bot&#39;), split=0.1)</span>
<span class="sd">       &gt;&gt;&gt; S1.simulate()</span>
<span class="sd">       &gt;&gt;&gt; S1.show()</span>
<span class="sd">       Splitter: S1</span>
<span class="sd">       ins...</span>
<span class="sd">       [0] feed</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    20</span>
<span class="sd">                           Ethanol  10</span>
<span class="sd">       outs...</span>
<span class="sd">       [0] top</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    2</span>
<span class="sd">                           Ethanol  1</span>
<span class="sd">       [1] bot</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    18</span>
<span class="sd">                           Ethanol  9</span>
<span class="sd">      </span>
<span class="sd">    Create a Splitter object, but this time with a componentwise split</span>
<span class="sd">    using a dictionary:</span>
<span class="sd">        </span>
<span class="sd">    .. code-block:: python</span>
<span class="sd">    </span>
<span class="sd">       &gt;&gt;&gt; S1 = units.Splitter(&#39;S1&#39;, ins=feed, outs=(&#39;top&#39;, &#39;bot&#39;),</span>
<span class="sd">       ...                     split={&#39;Water&#39;: 0.1, &#39;Ethanol&#39;: 0.99})</span>
<span class="sd">       &gt;&gt;&gt; S1.simulate()</span>
<span class="sd">       &gt;&gt;&gt; S1.show()</span>
<span class="sd">       Splitter: S1</span>
<span class="sd">       ins...</span>
<span class="sd">       [0] feed</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    20</span>
<span class="sd">                           Ethanol  10</span>
<span class="sd">       outs...</span>
<span class="sd">       [0] top</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    2</span>
<span class="sd">                           Ethanol  9.9</span>
<span class="sd">       [1] bot</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    18</span>
<span class="sd">                           Ethanol  0.1</span>
<span class="sd">                           </span>
<span class="sd">    Create a Splitter object using componentwise split, but this time specify the order:</span>
<span class="sd">        </span>
<span class="sd">    .. code-block:: python</span>
<span class="sd">    </span>
<span class="sd">       &gt;&gt;&gt; S1 = units.Splitter(&#39;S1&#39;, ins=feed, outs=(&#39;top&#39;, &#39;bot&#39;),</span>
<span class="sd">       ...                     order=(&#39;Ethanol&#39;, &#39;Water&#39;),</span>
<span class="sd">       ...                     split=(0.99, 0.10))</span>
<span class="sd">       &gt;&gt;&gt; S1.simulate()</span>
<span class="sd">       &gt;&gt;&gt; S1.show()</span>
<span class="sd">       Splitter: S1</span>
<span class="sd">       ins...</span>
<span class="sd">       [0] feed</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    20</span>
<span class="sd">                           Ethanol  10</span>
<span class="sd">       outs...</span>
<span class="sd">       [0] top</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    2</span>
<span class="sd">                           Ethanol  9.9</span>
<span class="sd">       [1] bot</span>
<span class="sd">           phase: &#39;l&#39;, T: 340 K, P: 101325 Pa</span>
<span class="sd">           flow (kmol/hr): Water    18</span>
<span class="sd">                           Ethanol  0.1</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_N_outs</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">_graphics</span> <span class="o">=</span> <span class="n">splitter_graphics</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isplit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[ChemicalIndexer] Componentwise split of feed to 0th outlet stream.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isplit</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Array] Componentwise split of feed to 0th outlet stream.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isplit</span><span class="o">.</span><span class="n">_data</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ID</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outs</span><span class="o">=</span><span class="p">(),</span> <span class="n">thermo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">split</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Unit</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="n">thermo</span><span class="p">)</span>
        <span class="n">chemicals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermo</span><span class="o">.</span><span class="n">chemicals</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">assert</span> <span class="ow">not</span> <span class="n">order</span><span class="p">,</span> <span class="s2">&quot;cannot pass &#39;other&#39; key word argument when split is a dictionary&quot;</span>
            <span class="n">order</span><span class="p">,</span> <span class="n">split</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">split</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        
        <span class="k">if</span> <span class="n">order</span><span class="p">:</span>
            <span class="n">isplit</span> <span class="o">=</span> <span class="n">chemicals</span><span class="o">.</span><span class="n">iarray</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">split</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">):</span>
            <span class="n">isplit</span> <span class="o">=</span> <span class="n">ChemicalIndexer</span><span class="o">.</span><span class="n">from_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">split</span><span class="p">),</span>
                                               <span class="n">phase</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                               <span class="n">chemicals</span><span class="o">=</span><span class="n">chemicals</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">split</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">chemicals</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="n">isplit</span> <span class="o">=</span> <span class="n">ChemicalIndexer</span><span class="o">.</span><span class="n">from_data</span><span class="p">(</span><span class="n">split</span><span class="p">,</span>
                                               <span class="n">phase</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                               <span class="n">chemicals</span><span class="o">=</span><span class="n">chemicals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isplit</span> <span class="o">=</span> <span class="n">isplit</span>

    <span class="k">def</span> <span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">top</span><span class="p">,</span> <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outs</span>
        <span class="n">feed</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
        <span class="n">feed_mol</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">mol</span>
        <span class="n">bot</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">T</span>
        <span class="n">bot</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">P</span>
        <span class="n">bot</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">feed</span><span class="o">.</span><span class="n">phase</span>
        <span class="n">top</span><span class="o">.</span><span class="n">mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">top_mol</span> <span class="o">=</span> <span class="n">feed_mol</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">split</span>
        <span class="n">bot</span><span class="o">.</span><span class="n">mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">feed_mol</span> <span class="o">-</span> <span class="n">top_mol</span></div>


<span class="k">class</span> <span class="nc">FakeSplitter</span><span class="p">(</span><span class="n">Unit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a FakeSplitter object that does nothing when simulated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_graphics</span> <span class="o">=</span> <span class="n">Splitter</span><span class="o">.</span><span class="n">_graphics</span>
    <span class="n">_N_ins</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_N_outs</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">_outs_size_is_fixed</span> <span class="o">=</span> <span class="kc">False</span>
    
    <span class="k">def</span> <span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">create_reversed_splitter_process_specification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ID</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outs</span><span class="o">=</span><span class="p">(),</span>
                                                       <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ProcessSpecification</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermo</span><span class="p">,</span> 
                                    <span class="n">specification</span><span class="o">=</span><span class="n">ReversedSplit</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                                    <span class="n">description</span><span class="o">=</span><span class="n">description</span> <span class="ow">or</span> <span class="s1">&#39;Reverse split&#39;</span><span class="p">)</span>    
    
<span class="n">FakeSplitter</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;Splitter&#39;</span>

<span class="k">class</span> <span class="nc">ReversedSplitter</span><span class="p">(</span><span class="n">Unit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a splitter that, when simulated, sets the inlet stream based on outlet streams. Must have only one input stream. The outlet streams will become the same temperature, pressure and phase as the input.&quot;&quot;&quot;</span>
    <span class="n">_graphics</span> <span class="o">=</span> <span class="n">Splitter</span><span class="o">.</span><span class="n">_graphics</span>
    <span class="n">_N_ins</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_N_outs</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">_outs_size_is_fixed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">power_utility</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">heat_utilities</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inlet</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
        <span class="n">outlets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outs</span>
        <span class="n">reversed_split</span><span class="p">(</span><span class="n">inlet</span><span class="p">,</span> <span class="n">outlets</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ReversedSplit</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a splitter that, when called, sets the inlet stream based on outlet streams. Must have only one input stream. The outlet streams will become the same temperature, pressure and phase as the input.&quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;splitter&#39;</span><span class="p">,)</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">splitter</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span> <span class="o">=</span> <span class="n">splitter</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">__name__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;ReversedSplit&#39;</span>
    
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">splitter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span>
        <span class="n">inlet</span><span class="p">,</span> <span class="o">=</span> <span class="n">splitter</span><span class="o">.</span><span class="n">ins</span>
        <span class="n">outlets</span> <span class="o">=</span> <span class="n">splitter</span><span class="o">.</span><span class="n">outs</span>
        <span class="n">reversed_split</span><span class="p">(</span><span class="n">inlet</span><span class="p">,</span> <span class="n">outlets</span><span class="p">)</span>
        
<span class="k">def</span> <span class="nf">reversed_split</span><span class="p">(</span><span class="n">inlet</span><span class="p">,</span> <span class="n">outlets</span><span class="p">):</span>
    <span class="n">inlet</span><span class="o">.</span><span class="n">mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">mol</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">outlets</span><span class="p">])</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">inlet</span><span class="o">.</span><span class="n">T</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">inlet</span><span class="o">.</span><span class="n">P</span>
    <span class="n">phase</span> <span class="o">=</span> <span class="n">inlet</span><span class="o">.</span><span class="n">phase</span>
    <span class="k">for</span> <span class="n">out</span> <span class="ow">in</span> <span class="n">outlets</span><span class="p">:</span>
        <span class="n">out</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">T</span>
        <span class="n">out</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">P</span>
        <span class="n">out</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span> 

  
    
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Yoel Cortes-Pena and Jeremy Guest

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>